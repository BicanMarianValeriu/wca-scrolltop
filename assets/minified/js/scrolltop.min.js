import{store as e,getContext as t,getElement as o,getConfig as l,withScope as n}from"@wordpress/interactivity";let{hooks:{applyFilters:i}}=wp,{fn:{getElement:getDOMElement,validateConfig:a}}=wecodeart,NAME="scrolltop",NAMESPACE=`wecodeart/${NAME}`,{state:r,callbacks:m}=e(NAMESPACE,{actions:{onScroll(){let e=t(),{showOffset:o=0}=m.getConfig();if(e.animationFrame&&cancelAnimationFrame(e.animationFrame),window.scrollY>=o){e.isVisible=!0;return}e.isVisible=!1},animateScoll(){let e=t();e.animationFrame&&cancelAnimationFrame(e.animationFrame),e.startTime=performance.now(),e.animationFrame=window.requestAnimationFrame(n(m.loop))}},callbacks:{loop(e){let{duration:t,startTime:o}=m.getConfig(),l=e-o,i=m.easing(l);document.documentElement.scrollTop=i,document.body.scrollTop=i,l<t&&window.requestAnimationFrame(n(m.loop))},visibility(){let{ref:e}=o(),{isVisible:l}=t();"boolean"==typeof l&&(e.classList[l?"add":"remove"]("wp-element-button--appear"),e.style.opacity=l?"var(--wp--opacity)":0,e.style.pointerEvents=l?"all":"none")},easing(e){let{duration:t}=m.getConfig(),o=m.getScrollTo()-m.getScrollTop();return-o*(e/=t)*(e-2)+m.getScrollTop()},getScrollTop:()=>document.documentElement.scrollTop||document.body.scrollTop,getScrollTo(){let{target:e,offset:t=0}=m.getConfig();return(e?e.offsetTop:0)-t},getConfig(){let e=t(),o={...r,...e};return o.target="html"===o.target?document.documentElement:getDOMElement(o.target),i("wecodeart.interactive.config",o,NAME)},validateConfig:()=>a(NAME,m.getConfig(),l(NAMESPACE))}});